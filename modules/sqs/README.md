# Terraform Datadog SQS monitor

## This module:
- Creates Datadog SQS monitor.
- You can monitor information in your Datadog account.
- You will receive messages about changing the status.


## Usage:

You can use [examples](./../../examples/sqs).

## Examples:

#### Minimal:
```hcl
module "datadog_sqs_monitor" {
  source         = "hazelops/monitoring/datadog//modules/sqs"
  dd_api_key     = "Datadog API Key"
  dd_app_key     = "Datadog APP Key"
  env            = "your-environment"
  aws_account_id = 1234567890 #your AWS account ID
  monitor_type   = "metric alert"
  queue_name     = "your-sqs-queue"

  notification_targets = [
    "@slack-alerts",
    "@user@somemail.com"
  ]
}
```

#### Complete:
```hcl
module "datadog_sqs_monitor" {
  source                 = "hazelops/monitoring/datadog//modules/sqs"
  dd_api_key             = "Datadog API Key"
  dd_app_key             = "Datadog APP Key"
  enabled                = true
  env                    = "your-environment"
  aws_account_id         = 1234566890 #your AWS account ID
  monitor_type           = "metric alert"
  sqs_normal_threshold   = 0
  sqs_warning_threshold  = 2
  sqs_critical_threshold = 10
  sqs_threshold_duration = "last_5m"
  sqs_queue_metric       = "avg:aws.sqs.approximate_number_of_messages_visible"
  queue_name             = "your-sqs-queue"
  renotify_interval      = 5

  notification_targets = [
    "@slack-alerts",
    "@user@somemail.com"
  ]
}
```

<!-- BEGINNING OF GENERATED BY TERRAFORM-DOCS -->

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_datadog"></a> [datadog](#requirement\_datadog) | ~> 3.1 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_datadog"></a> [datadog](#provider\_datadog) | ~> 3.1 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [datadog_monitor.sqs_queue_size](https://registry.terraform.io/providers/DataDog/datadog/latest/docs/resources/monitor) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_aws_account_id"></a> [aws\_account\_id](#input\_aws\_account\_id) | AWS account ID | `any` | n/a | yes |
| <a name="input_dd_api_key"></a> [dd\_api\_key](#input\_dd\_api\_key) | Datadog API Key. You can find out how to get it here: https://docs.datadoghq.com/account_management/api-app-keys/ | `any` | n/a | yes |
| <a name="input_dd_app_key"></a> [dd\_app\_key](#input\_dd\_app\_key) | Datadog APP Key. You can find out how to get it here: https://docs.datadoghq.com/account_management/api-app-keys/ | `any` | n/a | yes |
| <a name="input_enabled"></a> [enabled](#input\_enabled) | n/a | `bool` | `true` | no |
| <a name="input_env"></a> [env](#input\_env) | n/a | `any` | n/a | yes |
| <a name="input_monitor_type"></a> [monitor\_type](#input\_monitor\_type) | The type of the monitor. For more info visit https://registry.terraform.io/providers/DataDog/datadog/latest/docs/resources/monitor | `string` | `"metric alert"` | no |
| <a name="input_notification_targets"></a> [notification\_targets](#input\_notification\_targets) | List of targets to notify. For example it could be @slack-alerts or @user@somemail.com. For more info visit https://docs.datadoghq.com/monitors/notifications/?tab=is_alert#notifications | `list` | n/a | yes |
| <a name="input_notify_no_data"></a> [notify\_no\_data](#input\_notify\_no\_data) | A boolean indicating whether this monitor will notify when data stops reporting | `any` | n/a | yes |
| <a name="input_queue_name"></a> [queue\_name](#input\_queue\_name) | The name of the message queue being monitored. | `any` | n/a | yes |
| <a name="input_renotify_interval"></a> [renotify\_interval](#input\_renotify\_interval) | The number of minutes after the last notification before a monitor will re-notify on the current status. For more info please visit: https://registry.terraform.io/providers/DataDog/datadog/latest/docs/resources/monitor | `number` | `5` | no |
| <a name="input_sqs_critical_threshold"></a> [sqs\_critical\_threshold](#input\_sqs\_critical\_threshold) | In minutes. Message queue length that causes critical alert. For more information visit: https://docs.datadoghq.com/integrations/amazon_sqs/ | `number` | `10` | no |
| <a name="input_sqs_normal_threshold"></a> [sqs\_normal\_threshold](#input\_sqs\_normal\_threshold) | The length of the message queue which is considered normal. For more information visit: https://docs.datadoghq.com/integrations/amazon_sqs/ | `number` | `0` | no |
| <a name="input_sqs_queue_metric"></a> [sqs\_queue\_metric](#input\_sqs\_queue\_metric) | To create queue see https://www.datadoghq.com/blog/monitor-amazon-sqs-message-traffic-datadog/ | `string` | `"avg:aws.sqs.approximate_number_of_messages_visible"` | no |
| <a name="input_sqs_threshold_duration"></a> [sqs\_threshold\_duration](#input\_sqs\_threshold\_duration) | Duration of SQS threshold. Interval during which the measurement is carried out | `string` | `"last_5m"` | no |
| <a name="input_sqs_warning_threshold"></a> [sqs\_warning\_threshold](#input\_sqs\_warning\_threshold) | The length of the message queue which is considered warning. For more information visit: https://docs.datadoghq.com/integrations/amazon_sqs/ | `number` | `2` | no |

## Outputs

No outputs.

<!-- END OF GENERATED BY TERRAFORM-DOCS -->


![Hazelops logo](https://avatars0.githubusercontent.com/u/63737915?s=25&v=4) Terraform Datadog SQS Monitoring


Maintainer: [Dmitry Borisov](https://github.com/kobrikx)
